{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"table-responsive\"\n};\nconst _hoisted_2 = {\n  class: \"table\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  class: \"pagination\"\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass(_ctx.themeClass)\n  }, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", {\n    class: \"text-center mb-10\"\n  }, \"Stock Dashboard\", -1 /* HOISTED */)), _createCommentVNode(\" Stock Table \"), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"table\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Symbol\"), _createElementVNode(\"th\", null, \"Description\"), _createElementVNode(\"th\", null, \"Weight (%)\"), _createElementVNode(\"th\", null, \"Action\"), _createElementVNode(\"th\", null, \"Favorite\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.paginatedHoldings, holding => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: holding.symbol\n    }, [_createElementVNode(\"td\", null, _toDisplayString(holding.symbol), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(holding.description), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(parseFloat(holding.weight).toFixed(2)) + \"%\", 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.viewStockDetails(holding.symbol),\n      class: \"btn btn-primary\"\n    }, \" View Details \", 8 /* PROPS */, _hoisted_3)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.toggleFavorite(holding.symbol),\n      class: _normalizeClass([{\n        'btn-success': holding.isFavorite,\n        'btn-secondary': !holding.isFavorite\n      }, \"btn\"])\n    }, _toDisplayString(holding.isFavorite ? 'Unmark Favorite' : 'Mark Favorite'), 11 /* TEXT, CLASS, PROPS */, _hoisted_4)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createCommentVNode(\" Pagination Controls \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.prevPage && $setup.prevPage(...args)),\n    disabled: $setup.currentPage === 1,\n    class: \"btn btn-secondary\"\n  }, \"Previous\", 8 /* PROPS */, _hoisted_6), _createElementVNode(\"span\", null, \"Page \" + _toDisplayString($setup.currentPage) + \" of \" + _toDisplayString($setup.totalPages), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.nextPage && $setup.nextPage(...args)),\n    disabled: $setup.currentPage === $setup.totalPages,\n    class: \"btn btn-secondary\"\n  }, \"Next\", 8 /* PROPS */, _hoisted_7)])], 2 /* CLASS */);\n}","map":{"version":3,"names":["class","_createElementBlock","_normalizeClass","_ctx","themeClass","_createElementVNode","_createCommentVNode","_hoisted_1","_hoisted_2","_Fragment","_renderList","$setup","paginatedHoldings","holding","key","symbol","_toDisplayString","description","parseFloat","weight","toFixed","onClick","$event","viewStockDetails","_hoisted_3","toggleFavorite","isFavorite","_hoisted_4","_hoisted_5","_cache","args","prevPage","disabled","currentPage","_hoisted_6","totalPages","nextPage","_hoisted_7"],"sources":["/Users/attiqrehman/Documents/StockInfoSystem_FrontEnd/frontend/src/components/StockDashboard.vue"],"sourcesContent":["<template>\n  <div :class=\"themeClass\">\n    <h2 class=\"text-center mb-10\">Stock Dashboard</h2>\n\n    <!-- Stock Table -->\n    <div class=\"table-responsive\">\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>Symbol</th>\n            <th>Description</th>\n            <th>Weight (%)</th>\n            <th>Action</th>\n            <th>Favorite</th>\n          </tr>\n        </thead>\n        <tbody>\n            <tr v-for=\"holding in paginatedHoldings\" :key=\"holding.symbol\">\n            <td>{{ holding.symbol }}</td>\n            <td>{{ holding.description }}</td>\n            <td>{{ parseFloat(holding.weight).toFixed(2) }}%</td>\n           \n           <td>\n            <button @click=\"viewStockDetails(holding.symbol)\" class=\"btn btn-primary\">\n              View Details\n            </button>\n            </td>\n            <td>\n                    <button @click=\"toggleFavorite(holding.symbol)\" \n                      :class=\"{'btn-success': holding.isFavorite, 'btn-secondary': !holding.isFavorite}\" \n                      class=\"btn\">\n                        {{ holding.isFavorite ? 'Unmark Favorite' : 'Mark Favorite' }}\n                   </button>\n             </td>\n  </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- Pagination Controls -->\n    <div class=\"pagination\">\n      <button @click=\"prevPage\" :disabled=\"currentPage === 1\" class=\"btn btn-secondary\">Previous</button>\n      <span>Page {{ currentPage }} of {{ totalPages }}</span>\n      <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\" class=\"btn btn-secondary\">Next</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { ref, computed, onMounted } from \"vue\";\nimport { useRouter } from 'vue-router';\nexport default {\n  setup() {\n    const etfSymbol = \"QQQ\"; // Default ETF symbol (no user input)\n    const holdings = ref([]);\n    const currentPage = ref(1);\n    const itemsPerPage = 10; // Show 10 per page\n    const router = useRouter();\n    // Fetch ETF Holdings\n    const fetchHoldings = async () => {\n      try {\n        console.log(\"Fetching data from API...\");\n        const response = await axios.get(`http://localhost:3000/stocks/etf-holdings?symbol=${etfSymbol}`);\n        console.log(\"API Response:\", response.data);\n\n        // Initialize holdings with API data and favorite status from localStorage\n        holdings.value = response.data.map(holding => ({\n          ...holding,\n          isFavorite: getFavoriteFromStorage(holding.symbol), // Check localStorage for favorites\n        }));\n        \n        currentPage.value = 1; // Reset to first page\n      } catch (error) {\n        console.error(\"Error fetching holdings:\", error);\n      }\n    };\n\n    // Fetch data automatically when component loads\n    onMounted(fetchHoldings);\n\n    // Pagination Computed Properties\n    const totalPages = computed(() => Math.ceil(holdings.value.length / itemsPerPage));\n    console.log(totalPages.value);\n    const paginatedHoldings = computed(() => {\n      // First, sort the holdings by isFavorite (favorites first)\n      const sortedHoldings = [...holdings.value].sort((a, b) => b.isFavorite - a.isFavorite);\n\n      // Then, apply pagination to the sorted holdings\n      const start = (currentPage.value - 1) * itemsPerPage;\n      return sortedHoldings.slice(start, start + itemsPerPage);\n    });\n\n    // Pagination Methods\n    const nextPage = () => {\n      if (currentPage.value < totalPages.value) {\n        currentPage.value++;\n      }\n    };\n\n    const prevPage = () => {\n      if (currentPage.value > 1) {\n        currentPage.value--;\n      }\n    };\n\n    // View Stock Details (Route to Another Page)\n    const viewStockDetails = (symbol) => {\n      router.push(`/stock/${symbol}`);\n    };\n    const getChangeClass = (weight) => {\n      return parseFloat(weight) >= 0.05 ? \"text-success\" : \"text-danger\";\n    };\n    const getFavoriteFromStorage = (symbol) => {\n      const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n      return favorites.includes(symbol);\n    };\n\n    // Update localStorage with current favorites\n    const updateFavoritesInStorage = () => {\n      const favorites = holdings.value.filter(stock => stock.isFavorite).map(stock => stock.symbol);\n      localStorage.setItem('favorites', JSON.stringify(favorites));\n    };\n    const favoriteStocks = computed(() => {\n      return holdings.value.filter(stock => stock.isFavorite);\n    });\n    const toggleFavorite = (symbol) => {\n      const holding = holdings.value.find(stock => stock.symbol === symbol);\n      if (holding) {\n        holding.isFavorite = !holding.isFavorite; // Toggle the favorite status\n        updateFavoritesInStorage(); // Update localStorage\n      }\n    };\n    return {\n      holdings,\n      paginatedHoldings,\n      currentPage,\n      totalPages,\n      nextPage,\n      prevPage,\n      viewStockDetails,\n      getChangeClass,\n      toggleFavorite,\n      favoriteStocks,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.table {\n  background-color: var(--table-bg) !important;\n  color: var( --text-color) !important;\n  transition: background-color 0.3s, color 0.3s;\n}\n\n.table th {\n  background-color: var(--table-header-bg);\n  padding: 10px;\n  text-align: left;\n  --text-color: var(--text-dark);\n}\n\n.table td {\n  padding: 10px;\n  border-bottom: 1px solid var(--table-border);\n}\n.btn-primary {\n  background-color: var(--btn-bg);\n  color: var(--btn-text);\n}\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  margin-top: 20px;\n}\n\n</style>\n"],"mappings":";;EAKSA,KAAK,EAAC;AAAkB;;EACpBA,KAAK,EAAC;AAAO;mBAN1B;mBAAA;;EAwCSA,KAAK,EAAC;AAAY;mBAxC3B;mBAAA;;uBACEC,mBAAA,CA4CM;IA5CAD,KAAK,EADbE,eAAA,CACeC,IAAA,CAAAC,UAAU;gCACrBC,mBAAA,CAAkD;IAA9CL,KAAK,EAAC;EAAmB,GAAC,iBAAe,sBAE7CM,mBAAA,iBAAoB,EACpBD,mBAAA,CAgCM,OAhCNE,UAgCM,GA/BJF,mBAAA,CA8BQ,SA9BRG,UA8BQ,G,0BA7BNH,mBAAA,CAQQ,gBAPNA,mBAAA,CAMK,aALHA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAoB,YAAhB,aAAW,GACfA,mBAAA,CAAmB,YAAf,YAAU,GACdA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAiB,YAAb,UAAQ,E,wBAGhBA,mBAAA,CAmBQ,iB,kBAlBJJ,mBAAA,CAiBLQ,SAAA,QAlCPC,WAAA,CAiBkCC,MAAA,CAAAC,iBAAiB,EAA5BC,OAAO;yBAAlBZ,mBAAA,CAiBL;MAjB+Ca,GAAG,EAAED,OAAO,CAACE;QACvDV,mBAAA,CAA6B,YAAAW,gBAAA,CAAtBH,OAAO,CAACE,MAAM,kBACrBV,mBAAA,CAAkC,YAAAW,gBAAA,CAA3BH,OAAO,CAACI,WAAW,kBAC1BZ,mBAAA,CAAqD,YAAAW,gBAAA,CAA9CE,UAAU,CAACL,OAAO,CAACM,MAAM,EAAEC,OAAO,OAAM,GAAC,iBAEjDf,mBAAA,CAIM,aAHLA,mBAAA,CAES;MAFAgB,OAAK,EAAAC,MAAA,IAAEX,MAAA,CAAAY,gBAAgB,CAACV,OAAO,CAACE,MAAM;MAAGf,KAAK,EAAC;OAAkB,gBAE1E,iBAzBZwB,UAAA,E,GA2BYnB,mBAAA,CAMM,aALEA,mBAAA,CAIQ;MAJCgB,OAAK,EAAAC,MAAA,IAAEX,MAAA,CAAAc,cAAc,CAACZ,OAAO,CAACE,MAAM;MAC1Cf,KAAK,EA7B5BE,eAAA;QAAA,eA6B8CW,OAAO,CAACa,UAAU;QAAA,kBAAoBb,OAAO,CAACa;MAAU,GAC1E,KAAK;wBACNb,OAAO,CAACa,UAAU,sEA/B7CC,UAAA,E;wCAuCIrB,mBAAA,yBAA4B,EAC5BD,mBAAA,CAIM,OAJNuB,UAIM,GAHJvB,mBAAA,CAAmG;IAA1FgB,OAAK,EAAAQ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEnB,MAAA,CAAAoB,QAAA,IAAApB,MAAA,CAAAoB,QAAA,IAAAD,IAAA,CAAQ;IAAGE,QAAQ,EAAErB,MAAA,CAAAsB,WAAW;IAAQjC,KAAK,EAAC;KAAoB,UAAQ,iBAzChGkC,UAAA,GA0CM7B,mBAAA,CAAuD,cAAjD,OAAK,GAAAW,gBAAA,CAAGL,MAAA,CAAAsB,WAAW,IAAG,MAAI,GAAAjB,gBAAA,CAAGL,MAAA,CAAAwB,UAAU,kBAC7C9B,mBAAA,CAAwG;IAA/FgB,OAAK,EAAAQ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEnB,MAAA,CAAAyB,QAAA,IAAAzB,MAAA,CAAAyB,QAAA,IAAAN,IAAA,CAAQ;IAAGE,QAAQ,EAAErB,MAAA,CAAAsB,WAAW,KAAKtB,MAAA,CAAAwB,UAAU;IAAEnC,KAAK,EAAC;KAAoB,MAAI,iBA3CrGqC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}